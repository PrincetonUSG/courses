(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(e,t,a){e.exports=a.p+"static/media/demo_0.3b8fbc5f.png"},112:function(e,t,a){e.exports=a.p+"static/media/demo_1.b93dc04e.png"},113:function(e,t,a){e.exports=a.p+"static/media/demo_2.5be758c9.png"},114:function(e,t,a){e.exports=a.p+"static/media/demo_3.ba8ca5bf.png"},115:function(e,t,a){e.exports=a.p+"static/media/demo_4.281faa76.png"},116:function(e,t,a){e.exports=a.p+"static/media/demo_5.3ae0e12d.png"},117:function(e,t,a){e.exports=a.p+"static/media/demo_6.a6fc6ee0.png"},118:function(e,t,a){e.exports=a.p+"static/media/demo_7.4fa1e25c.png"},119:function(e,t,a){e.exports=a.p+"static/media/demo_8.b50531da.png"},120:function(e,t,a){e.exports=a.p+"static/media/demo_9.15f3da5d.png"},121:function(e,t,a){e.exports=a.p+"static/media/demo_10.8ac264e9.png"},138:function(e,t,a){e.exports=a(259)},232:function(e,t,a){},233:function(e,t,a){},234:function(e,t,a){},235:function(e,t,a){},236:function(e,t,a){},237:function(e,t,a){},238:function(e,t,a){},239:function(e,t,a){},240:function(e,t,a){},241:function(e,t,a){},242:function(e,t,a){},243:function(e,t,a){},244:function(e,t,a){},245:function(e,t,a){},246:function(e,t,a){},247:function(e,t,a){},248:function(e,t,a){},249:function(e,t,a){},250:function(e,t,a){},251:function(e,t,a){},252:function(e,t,a){},253:function(e,t,a){},254:function(e,t,a){},255:function(e,t,a){},256:function(e,t,a){},257:function(e,t,a){},259:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(102),r=a.n(o),i=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function c(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var l=a(262),u=a(264),h=a(263),d=a(9),p=a(2),m=a(3),f=a(6),v=a(4),S=a(5),b=a(1),g=a(69),C=a.n(g),k=a(103),y=a.n(k),E=a(104),N=a.n(E),O=a(105),w=a.n(O),j=a(106),L=a.n(j),D=a(107),T=a.n(D),I=a(108),R=a.n(I),M=(a(232),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(v.a)(t).call(this,e))).state={expanded:!1},e.demo&&"/home"!==window.location.pathname&&!localStorage.getItem("precourser-demo")&&(a.state={expanded:!0},localStorage.setItem("precourser-demo",!0)),a.toggle=a.toggle.bind(Object(b.a)(Object(b.a)(a))),a.collapse=a.collapse.bind(Object(b.a)(Object(b.a)(a))),a.handleClickOutside=a.handleClickOutside.bind(Object(b.a)(Object(b.a)(a))),a.setRef=a.setRef.bind(Object(b.a)(Object(b.a)(a))),a}return Object(S.a)(t,e),Object(m.a)(t,[{key:"toggle",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"collapse",value:function(){this.setState({expanded:!1})}},{key:"handleClickOutside",value:function(e){this.ref.contains(e.target)||this.collapse()}},{key:"setRef",value:function(e){this.ref=e}},{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"render",value:function(){var e=this.state.expanded,t=this.props.display,a=this.props.description,n=this.props.alignRight,o=this.props.demo,r=this.props.children,i=this.toggle,c=this.collapse,l=this.setRef;return s.a.createElement("div",{className:"NavbarItem",ref:l},s.a.createElement("button",{className:"NavbarItem-display"+(e?" NavbarItem-active":""),title:a,onClick:i,tabIndex:"0"},t),e?o?s.a.Children.map(r,function(e){return s.a.cloneElement(e,{collapseParent:c})}):s.a.createElement("div",{className:"NavbarItem-dropdown NavbarItem-align-"+(n?"right":"left")},s.a.Children.map(r,function(e){return s.a.cloneElement(e,{collapseParent:c})})):null)}}]),t}(n.Component)),x=(a(233),function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.collapseParent,t=this.props.items,a=this.props.selectedValue,n=this.props.onSelect,o=function(t){n(t),e()};return s.a.createElement("ul",{className:"NavbarDropdown"},t.map(function(e){return s.a.createElement("li",{key:e.value,className:"NavbarDropdown-item"+(a===e.value?" NavbarDropdown-selected":""),onClick:o.bind(null,e.value),tabIndex:"0"},e.label)}))}}]),t}(n.Component)),_=(a(234),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(v.a)(t).call(this,e))).state={value:a.props.defaultValue,copied:!1,error:null},a.handleSubmitClick=a.handleSubmitClick.bind(Object(b.a)(Object(b.a)(a))),a.handleChange=a.handleChange.bind(Object(b.a)(Object(b.a)(a))),a.handleKeyDown=a.handleKeyDown.bind(Object(b.a)(Object(b.a)(a))),a.handleCopy=a.handleCopy.bind(Object(b.a)(Object(b.a)(a))),a.setRef=a.setRef.bind(Object(b.a)(Object(b.a)(a))),a}return Object(S.a)(t,e),Object(m.a)(t,[{key:"handleSubmitClick",value:function(){var e=this.state.value,t=this.props.collapseParent,a=this.props.defaultValue,n=this.props.isFeedback,s=this.props.onSubmit,o=this.props.isReadOnly;if(!a)return s(),t();var r=e.trim().replace(/\s+/g," ");if(n){if(r.length>200)return this.setState({error:"Use the link for longer responses!"});if(!r.length)return this.setState({error:"Tongue tied?"})}else if(!o){if(r.length>25)return this.setState({error:"Please enter a shorter name"});if(!r.length)return this.setState({error:"Please enter a valid name"})}s(r),t()}},{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleKeyDown",value:function(e){"Enter"===e.key&&this.handleSubmitClick()}},{key:"handleCopy",value:function(){this.inputRef.select(),document.execCommand("Copy"),this.setState({copied:!0})}},{key:"setRef",value:function(e){this.inputRef=e}},{key:"render",value:function(){var e=this,t=this.state.value,a=this.state.error,n=this.state.copied,o=this.props.collapseParent,r=this.props.prompt,i=this.props.defaultValue,c=this.props.isFeedback,l=this.props.verb,u=this.props.isReadOnly,h=this.handleSubmitClick,d=this.handleChange,p=this.handleKeyDown,m=this.handleCopy,f=this.setRef;return s.a.createElement("div",{className:"NavbarInput"},s.a.createElement("label",{className:"NavbarInput-prompt"},r),i?s.a.createElement("input",{ref:f,className:"NavbarInput-input",type:"text",value:t,maxLength:c?200:25,onChange:d,onKeyDown:p,onFocus:function(e){e.target.select()},onClick:u?function(e){e.target.select()}:null,autoFocus:!0,readOnly:u}):null,a?s.a.createElement("div",{className:"NavbarInput-error"},a):null,s.a.createElement("div",{className:"NavbarInput-buttons"},s.a.createElement("button",{className:u?"NavbarInput-submit":"NavbarInput-cancel",onClick:u?m:o,onMouseOut:function(){e.setState({copied:!1})}},u?n?"Copied":"Copy":"Cancel"),s.a.createElement("button",{className:"NavbarInput-submit",onClick:h},l)))}}]),t}(n.Component)),A=a(109),F=a.n(A),P=a(110),U=a.n(P),H=(a(235),a(111)),J=a.n(H),B=a(112),W=a.n(B),V=a(113),q=a.n(V),G=a(114),K=a.n(G),Q=a(115),z=a.n(Q),Y=a(116),X=a.n(Y),$=a(117),Z=a.n($),ee=a(118),te=a.n(ee),ae=a(119),ne=a.n(ae),se=a(120),oe=a.n(se),re=a(121),ie=a.n(re),ce=[{image:J.a,text:"Welcome to precourser! Here is a quick tour of the features you'll find useful for your course selection."},{image:W.a,text:"Enter any search terms in the search bar. You can search by title, department, and more!"},{image:q.a,text:"Click on the filter to explore all the search options: departments, distributions, P/D/F and audit options."},{image:K.a,text:"Click on a result to show/hide course information. Click the buttons to add a course to your schedule, or to save it."},{image:z.a,text:"The courses added to your schedule will appear to the right. Click on a section to select it for your schedule."},{image:X.a,text:"Click the buttons at the top of the page to change semester or to add/rename/delete schedules."},{image:Z.a,text:"Click on the buttons at the top of the search pane to search for instructors, or view your saved/selected courses."},{image:te.a,text:"Click on an instructor result to display their contact information and all the courses they have taught."},{image:ne.a,text:"These buttons redirect you to the registrar's course offering pages. The cross hides the course information page."},{image:oe.a,text:"You can copy the link provided to export your precourser schedule into Google Calendar, or to download it in iCal format."},{image:ie.a,text:"If you have any comments or thoughts please use the feedback form :) Happy course selection!"}],le=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(v.a)(t).call(this,e))).state={page:0},a.changePage=a.changePage.bind(Object(b.a)(Object(b.a)(a))),a}return Object(S.a)(t,e),Object(m.a)(t,[{key:"changePage",value:function(e){e<0&&(e=ce.length-1),e>=ce.length&&(e=0),this.setState({page:e})}},{key:"render",value:function(){var e=this.props.collapseParent,t=this.state.page,a=this.changePage,n=ce[t].image,o=ce[t].text;return s.a.createElement("div",{className:"Demo",onClick:function(t){e(),t.stopPropagation()}},s.a.createElement("div",{className:"Demo-popup",onClick:function(e){e.stopPropagation()}},s.a.createElement("div",{className:"Demo-top",style:{backgroundImage:"url(".concat(n,")")}}),s.a.createElement("ul",{className:"Demo-text"},o),s.a.createElement("div",{className:"Demo-buttons"},s.a.createElement("div",{className:"Demo-page",title:"Page ".concat(t+1," of ").concat(ce.length)},"".concat(t+1," / ").concat(ce.length)),s.a.createElement("button",{className:"Demo-button",title:"Previous page",onClick:function(e){a(t-1),e.stopPropagation()}},s.a.createElement(F.a,null)),s.a.createElement("button",{className:"Demo-button",title:"Next page",onClick:function(e){a(t+1),e.stopPropagation()}},s.a.createElement(U.a,null)))))}}]),t}(n.Component),ue=a(48),he=a.n(ue),de=(a(236),function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.semesters,t=this.props.selectedSemester,a=this.props.user,n=this.props.schedules,o=this.props.selectedSchedule,r=this.props.semesterLookup,i=this.props.onChangeSemester,c=this.props.onChangeSchedule,l=this.props.onCreateSchedule,u=this.props.onRenameSchedule,h=this.props.onDeleteSchedule,p=this.props.isEmpty;return s.a.createElement("nav",{className:"Navbar"},s.a.createElement("div",{className:"Navbar-brand"},s.a.createElement("img",{src:he.a,alt:"logo",className:"Navbar-logo"}),s.a.createElement("a",{href:"/home",className:"Navbar-title",title:"Home"},"precourser")),p?null:[s.a.createElement(M,{key:"semester",display:s.a.createElement("span",null,r[t].name," ",s.a.createElement(C.a,null)),description:"Change semester"},s.a.createElement(x,{items:e.map(function(e){return{value:e._id,label:e.name}}),selectedValue:t,onSelect:i})),s.a.createElement(M,{key:"schedule",display:s.a.createElement("span",null,o.name," ",s.a.createElement(C.a,null)),description:"Change schedule"},s.a.createElement(x,{items:n.map(function(e){return{value:e._id,label:e.name}}),selectedValue:o._id,onSelect:c})),s.a.createElement(M,{key:"rename",display:s.a.createElement(y.a,null),description:"Rename schedule"},s.a.createElement(_,{prompt:"Rename your schedule:",defaultValue:o.name,onSubmit:u,verb:"Rename"})),s.a.createElement(M,{key:"create",display:s.a.createElement(N.a,null),description:"Create schedule"},s.a.createElement(_,{prompt:"Create a new schedule:",defaultValue:"New Schedule",onSubmit:l,verb:"Create"})),s.a.createElement(M,{key:"delete",display:s.a.createElement(w.a,null),description:"Delete schedule"},s.a.createElement(_,{prompt:"Are you sure you want to delete the schedule '"+o.name+"'?",onSubmit:h,verb:"Delete"})),s.a.createElement(M,{key:"ical",display:s.a.createElement(L.a,null),description:"Export schedule to iCal"},s.a.createElement(_,{prompt:"Add to Google Calendar or save to iCal:",defaultValue:"".concat(window.location.origin,"/ical/").concat(o._id,".ics"),onSubmit:function(){d.a.event({category:"Navigation",action:"Downloaded iCal"}),window.location.href="/ical/".concat(o._id,".ics")},verb:"Save",isReadOnly:!0}))],s.a.createElement("div",{className:"Navbar-stretch"}),s.a.createElement(M,{display:s.a.createElement(R.a,null),description:"Help",alignRight:!0,demo:!0},s.a.createElement(le,null)),s.a.createElement(M,{display:s.a.createElement(T.a,null),description:"Feedback",alignRight:!0},s.a.createElement(_,{prompt:s.a.createElement("span",null,"All feedback welcome! Access the full form"," ",s.a.createElement("a",{className:"Navbar-feedback",href:"https://goo.gl/forms/R5EIfruDGJlIrkG33",rel:"noopener noreferrer",target:"_blank"},"here"),"."),defaultValue:"Enter any thoughts!",isFeedback:!0,onSubmit:function(e){d.a.event({category:"Navigation",action:"Submitted Feedback"});var t=encodeURIComponent(e),n="".concat("https://docs.google.com/forms/d/e/").concat("1FAIpQLSfsJpCwzmklLlp4ziUqsAwLOQ3M9b3gRUQisMyoh-qPBqRYew","/formResponse?").concat("entry.1377308274","=").concat(a._id,"&").concat("entry.438515020","=").concat(t);fetch(n,{method:"POST"}).catch(function(e){e&&e.message&&e.message.includes("No 'Access-Control-Allow-Origin' header is present on the requested resource.")||console.error(e)})},verb:"Submit"})),p?null:s.a.createElement(M,{display:a._id,alignRight:!0},s.a.createElement(_,{prompt:"Would you like to logout?",onSubmit:function(){d.a.event({category:"Navigation",action:"Logged out"}),window.location.href="/auth/logout"},verb:"Logout"})))}}]),t}(n.Component)),pe=a(122),me=a.n(pe),fe=a(49),ve=a.n(fe),Se=a(22),be=a.n(Se),ge=a(123),Ce=a.n(ge),ke=a(26),ye=a.n(ke),Ee=a(27),Ne=a.n(Ee),Oe=a(35),we=a.n(Oe),je=a(36),Le=a.n(je),De=a(23),Te=a.n(De),Ie=a(24),Re=a.n(Ie),Me=a(124),xe=a.n(Me),_e=a(50),Ae=a.n(_e),Fe=a(125),Pe=a.n(Fe),Ue=a(126),He=a.n(Ue),Je=(a(237),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(v.a)(t).call(this,e))).state={keys:e.keys.slice(),position:e.tabLabels.slice().fill(0),tab:0,sort:e.tabLabels.slice().fill(0),sign:e.tabLabels.slice().fill(1)},a.handlePositionUp=a.handlePositionUp.bind(Object(b.a)(Object(b.a)(a))),a.handlePositionDown=a.handlePositionDown.bind(Object(b.a)(Object(b.a)(a))),a.handleTabClick=a.handleTabClick.bind(Object(b.a)(Object(b.a)(a))),a.handleSortClick=a.handleSortClick.bind(Object(b.a)(Object(b.a)(a))),a}return Object(S.a)(t,e),Object(m.a)(t,[{key:"handlePositionUp",value:function(){var e=this,t=this.state.position.slice();t[this.state.tab]-=50,this.setState({position:t},function(){e.contentBottom.scrollIntoView()})}},{key:"handlePositionDown",value:function(){var e=this,t=this.state.position.slice();t[this.state.tab]+=50,this.setState({position:t},function(){e.contentTop.scrollIntoView()})}},{key:"handleTabClick",value:function(e){this.setState({tab:e})}},{key:"handleSortClick",value:function(e){var t=this,a=this.state.sort.slice(),n=this.state.sign.slice(),s=this.state.position.slice(),o={};s[this.state.tab]=0,o.position=s,a[this.state.tab]===e?(n[this.state.tab]*=-1,o.sign=n):(a[this.state.tab]=e,n[this.state.tab]=1,o.sort=a,o.sign=n),this.setState(o,function(){t.contentTop.scrollIntoView()})}},{key:"componentWillReceiveProps",value:function(e){for(var t=this.state.position.slice(),a=!1,n=0;n<t.length;n++)e.keys[n]!==this.state.keys[n]&&(t[n]=0,a=!0);a&&this.setState({position:t,keys:e.keys})}},{key:"render",value:function(){for(var e=this,t=this.state.tab,a=this.state.position[t],n=this.state.sort[t],o=this.state.sign[t],r=this.props.tabLabels,i=this.props.tabDescriptions,c=this.props.sortLabels,l=this.props.sortDescriptions,u=this.props.renderInput,h=this.props.renderContent,d=this.props.captionNouns,p=this.props.edge,m=this.handlePositionUp,f=this.handlePositionDown,v=this.handleTabClick,S=this.handleSortClick,b=[],g=0;g<r.length;g++)b.push(s.a.createElement("button",{key:g,onClick:v.bind(null,g),className:"SideMenu-button"+(g===t?" SideMenu-button-selected":""),title:i[g]},r[g]));for(var C=[],k=0;k<c[t].length;k++)C.push(s.a.createElement("button",{key:k,onClick:S.bind(null,k),className:"SideMenu-button SideMenu-sort"+(k===n?" SideMenu-button-selected":""),title:l[t][k]},c[t][k][k===n?(1-o)/2:0]));var y=u(t),E=h(t,n,o),N=d[t],O=1===E.length?"":"s",w=a+1,j=E.length>a+50?a+50:E.length,L=E.length>50?"".concat(w,"\u2013").concat(j," of ").concat(E.length," ").concat(N).concat(O):"".concat(E.length," ").concat(N).concat(O),D=[];a>0&&D.push(s.a.createElement("li",{className:"SideMenu-content-header",onClick:m,key:"up",title:"Previous page"},s.a.createElement(Pe.a,null)));var T=[];return a+50<E.length&&T.push(s.a.createElement("li",{className:"SideMenu-content-footer",onClick:f,key:"down",title:"Next page"},s.a.createElement(He.a,null))),s.a.createElement("div",{className:"SideMenu"+(p?" SideMenu-"+p:"")},s.a.createElement("div",{className:"SideMenu-buttons"},b,s.a.createElement("div",{className:"SideMenu-stretch"})),y,s.a.createElement("div",{className:"SideMenu-buttons SideMenu-sorts"},s.a.createElement("div",{className:"SideMenu-caption",title:L},L),s.a.createElement("div",{className:"SideMenu-stretch"}),C),s.a.createElement("ul",{className:"SideMenu-content"},s.a.createElement("li",{ref:function(t){e.contentTop=t},key:"top"}),D,E.slice(a,a+50),T,s.a.createElement("li",{ref:function(t){e.contentBottom=t},key:"bottom"})))}}]),t}(n.Component)),Be=a(127),We=a.n(Be),Ve=a(33),qe=a.n(Ve),Ge=a(128),Ke=a.n(Ge),Qe=a(129),ze=a.n(Qe),Ye=a(130),Xe=a.n(Ye),$e=(a(238),["#f44336","#f44336","#FF5722","#FF9800","#FFB300","#FDD835","#C0CA33","#8BC34A","#4CAF50"]),Ze=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(m.a)(t,[{key:"getColor",value:function(e){var t=function(e){"#"===e[0]&&(e=e.substring(1));var t=e.substr(0,2),a=e.substr(2,2),n=e.substr(4,2);return[parseInt(t,16),parseInt(a,16),parseInt(n,16)]},a=function(e){var t=e[0]/255,a=e[1]/255,n=e[2]/255,s=Math.max(t,a,n),o=Math.min(t,a,n),r=0,i=0,c=(s+o)/2;if(s===o)return[r,i,c];var l=s-o;switch(i=c>.5?l/(2-s-o):l/(s+o),s){case t:r=(a-n)/l+(a<n?6:0);break;case a:r=(n-t)/l+2;break;case n:r=(t-a)/l+4}return[r/=6,i,c]},n=(e-1)/4*($e.length-1),s=Math.ceil(n)||1,o=s-1,r=$e[o],i=t($e[s]),c=t(r),l=a(i);return function(e){return"hsl("+360*e[0]+", "+100*e[1]+"%, "+100*e[2]+"%)"}(function(e,t,a,n,s){for(var o=[0,0,0],r=0;r<3;r++)o[r]=e[r]+(s-a)/(n-a)*(t[r]-e[r]);return o}(a(c),l,o,s,n))}},{key:"render",value:function(){var e=this.props.score,t=this.props.new,a=this.props.description,n=this.getColor;return s.a.createElement("span",{className:"CourseRating"+(e?"":t?" CourseRating-new":" CourseRating-none"),style:e?{backgroundColor:n(e)}:null,title:a},e?e.toFixed(2):t?"New":"N/A")}}]),t}(n.Component),et=a(131),tt=a.n(et),at=(a(239),function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e,t,a=this.props.now-this.props.then;a<36e5?(e=Math.round(a/1e3/60),t="minute"):a<864e5?(e=Math.round(a/1e3/60/60),t="hour"):a<6048e5?(e=Math.round(a/1e3/60/60/24),t="day"):(e=Math.round(a/1e3/60/60/24/7),t="week");var n=e+t.substr(0,1),o="Last updated about "+e+" "+t+(1===e?"":"s")+" ago";return s.a.createElement("span",{className:"TimeAgo",title:o},s.a.createElement(tt.a,null),n)}}]),t}(n.Component)),nt=(a(240),function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){for(var e=this.props.user,t=this.props.now,a=this.props.departmentLookup,n=this.props.semesterLookup,o=this.props.distributionLookup,r=this.props.pdfLookup,i=this.props.auditLookup,c=this.props.course,l=this.props.showInstructors,u=this.props.showStrictRatings,h=this.props.showSemester,d=!1,p=0;p<e.savedCourses.length;p++)d|=e.savedCourses[p]._id===c._id;var m=c.department+c.catalogNumber+c.crossListings.map(function(e){return" / "+e.department+e.catalogNumber}).join("")+" (".concat(n[c.semester].name,")\n")+c.title+"\n"+(h?"":c.instructors.map(function(e){return e.fullName}).join(", ")||"\u2013");return s.a.createElement("div",{className:"CourseSummary",title:m},s.a.createElement("div",{className:"CourseSummary-top"},s.a.createElement("span",{className:"CourseSummary-listing",title:l?null:a[c.department]},l?n[c.semester].name:c.department+c.catalogNumber),!l&&c.crossListings&&c.crossListings.length?s.a.createElement("span",{className:"CourseSummary-crosslistings"},c.crossListings.map(function(e){return s.a.createElement("span",{key:e.department,className:"CourseSummary-crosslisting",title:a[e.department]},"/ "+e.department+e.catalogNumber)})):null,s.a.createElement("span",{className:"CourseSummary-tags"},c.distribution?s.a.createElement("span",{className:"CourseSummary-distribution",title:o[c.distribution]},c.distribution):null,c.pdf?s.a.createElement("span",{className:"CourseSummary-"+c.pdf.toLowerCase(),title:r[c.pdf]},c.pdf):null,c.audit?s.a.createElement("span",{className:"CourseSummary-"+c.audit.toLowerCase(),title:i[c.audit.slice(0,-4)]},c.audit.slice(0,-4)):null),s.a.createElement("span",{className:"CourseSummary-stretch"}),d?s.a.createElement("span",{className:"CourseSummary-saved",title:"Saved course"},s.a.createElement(be.a,null)):null,s.a.createElement(Ze,{score:!c.rating||u&&c.rating.semester!==c.semester?null:c.rating.score,new:c.new,description:!c.rating||u&&c.rating.semester!==c.semester?null:c.rating.description})),s.a.createElement("div",{className:"CourseSummary-middle"},s.a.createElement("span",{className:"CourseSummary-title"},l?c.instructors.map(function(e){return e.fullName}).join(", ")||"\u2013":c.title),s.a.createElement("span",{className:"CourseSummary-stretch"})),s.a.createElement("div",{className:"CourseSummary-bottom"},h?s.a.createElement("span",{className:"CourseSummary-semester"},n[c.semester].name):l?null:s.a.createElement("span",{className:"CourseSummary-instructors"},c.instructors.map(function(e){return e.fullName}).join(", ")||"\u2013"),s.a.createElement("span",{className:"CourseSummary-stretch"}),s.a.createElement(at,{now:t,then:new Date(c.lastModified)}),s.a.createElement("span",{className:"CourseSummary-status CourseSummary-status-"+c.status.toLowerCase(),title:c.status},"Open"===c.status?null:s.a.createElement(Xe.a,null)),s.a.createElement("span",{className:"CourseSummary-seats"},(c.seatsTaken>=0?c.seatsTaken:"\u2013")+" / "+(c.seatsTotal>=0?c.seatsTotal:"\u2013"))))}}]),t}(n.Component)),st=(a(241),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(v.a)(t).call(this,e))).state={expanded:!1},a.toggle=a.toggle.bind(Object(b.a)(Object(b.a)(a))),a.handleClickOutside=a.handleClickOutside.bind(Object(b.a)(Object(b.a)(a))),a.renderColorPick=a.renderColorPick.bind(Object(b.a)(Object(b.a)(a))),a}return Object(S.a)(t,e),Object(m.a)(t,[{key:"toggle",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"handleClickOutside",value:function(e){this.ref.contains(e.target)||this.setState({expanded:!1})}},{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"renderColorPick",value:function(e){var t=this,a=this.props.onChangeCourseColorInSchedule,n=this.props.course;return s.a.createElement("div",{className:"ColorPicker-pick",style:{backgroundColor:"#".concat(e._id)},onClick:function(s){a(n._id,e._id),t.setState({expanded:!1}),s.stopPropagation()},title:e.name[0].toUpperCase()+e.name.substr(1).toLowerCase(),key:e.name})}},{key:"render",value:function(){var e=this,t=this.props.colors,a=this.props.colorLookup,n=this.props.course,o=this.props.color,r=this.state.expanded,i=this.toggle,c=this.renderColorPick;return a[n._id]?s.a.createElement("div",{className:"ColorPicker"+(r?" ColorPicker-expanded":""),style:{backgroundColor:o},ref:function(t){e.ref=t},onClick:function(e){i(),e.stopPropagation()},title:"Change color"},r?s.a.createElement("div",{className:"ColorPicker-picker",onClick:function(e){e.stopPropagation()}},t.map(function(e){return c(e)})):null):s.a.createElement("div",{className:"ColorPicker",ref:function(t){e.ref=t}})}}]),t}(n.Component)),ot=(a(242),function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.selectedSemester,t=this.props.user,a=this.props.selectedSchedule,n=this.props.selectedCourse,o=this.props.colors,r=this.props.now,i=this.props.departmentLookup,c=this.props.semesterLookup,l=this.props.colorLookup,u=this.props.distributionLookup,h=this.props.pdfLookup,d=this.props.auditLookup,p=this.props.onSelectCourse,m=this.props.onUnselectCourse,f=this.props.onSaveCourse,v=this.props.onUnsaveCourse,S=this.props.onAddCourseToSchedule,b=this.props.onRemoveCourseFromSchedule,g=this.props.onMouseOverCourse,C=this.props.onMouseOutCourse,k=this.props.onChangeCourseColorInSchedule,y=this.props.course,E=this.props.showButtons,N=this.props.showInstructors,O=this.props.showStrictRatings,w=this.props.showSemester,j=!1;if(E)for(var L=0;L<a.courses.length;L++)j|=a.courses[L]._id===y._id;for(var D=!1,T=0;T<t.savedCourses.length;T++)D|=t.savedCourses[T]._id===y._id;var I=n&&y._id===n._id,R=l&&l[y._id],M=E&&y.semester===e;return s.a.createElement("li",{className:"CourseResult"+(I?" CourseResult-selected":""),onClick:(E&&I?m:p).bind(null,y._id),onMouseOver:M?g.bind(null,y):null,onMouseOut:M?C.bind(null,y):null},E?s.a.createElement(st,{colors:o,colorLookup:l,onChangeCourseColorInSchedule:k,course:y,color:R}):null,s.a.createElement("div",{className:"CourseResult-main"},s.a.createElement(nt,{user:t,now:r,departmentLookup:i,semesterLookup:c,distributionLookup:u,pdfLookup:h,auditLookup:d,course:y,showInstructors:N,showStrictRatings:O,showSemester:w})),E?s.a.createElement("button",{title:I?"Hide course information":"Show course information",className:"CourseResult-button CourseResult-"+(I?"unselect":"select"),onClick:function(e){(I?m:p)(y._id),e.stopPropagation()}},I?s.a.createElement(qe.a,null):s.a.createElement(We.a,null)):null,M?s.a.createElement("button",{title:j?"Remove course from schedule":"Add course to schedule",className:"CourseResult-button CourseResult-"+(j?"remove":"add"),onClick:function(e){(j?b:S)(y._id),e.stopPropagation()}},j?s.a.createElement(ze.a,null):s.a.createElement(Ke.a,null)):null,E?s.a.createElement("button",{title:D?"Unsave course":"Save course",className:"CourseResult-button CourseResult-"+(D?"unsave":"save"),onClick:function(e){(D?v:f)(y._id),e.stopPropagation()}},s.a.createElement(be.a,null)):null)}}]),t}(n.Component)),rt={},it=function(e,t){return t||(t={}),t.credentials="same-origin",fetch(e,t).then(function(e){if(e.status>=200&&e.status<300)return e;var t=new Error("HTTP Error ".concat(e.statusText));throw t.status=e.statusText,t.response=e,console.error(t),t}).then(function(e){return e.json()})};rt.fetchJson=it,rt.fetchJsonAndSetState=function(e,t){var a=this;return it(e,t).then(function(e){return a.setState(e)})};var ct=rt,lt=(a(243),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(v.a)(t).call(this,e))).state={expanded:!1,instructor:a.props.instructor,loaded:void 0},a.toggle=a.toggle.bind(Object(b.a)(Object(b.a)(a))),a.fetchJson=ct.fetchJson,a.handleLoadInstructor=a.handleLoadInstructor.bind(Object(b.a)(Object(b.a)(a))),a}return Object(S.a)(t,e),Object(m.a)(t,[{key:"toggle",value:function(){!0===this.state.loaded?this.setState({expanded:!this.state.expanded}):this.handleLoadInstructor(this.state.instructor._id)}},{key:"handleLoadInstructor",value:function(e){var t=this;!1!==this.state.loaded&&(d.a.pageview("/instructor/".concat(this.state.instructor._id)),d.a.event({category:"Instructor",action:"Opened Instructor",label:e}),this.setState({loaded:!1}),this.fetchJson("/api/instructor/".concat(e)).then(function(e){e.loaded=!0,t.setState(e),setTimeout(function(){t.setState({expanded:!0})},.05)}))}},{key:"render",value:function(){var e=this.props.selectedSemester,t=this.props.user,a=this.props.selectedSchedule,n=this.props.selectedCourse,o=this.props.colors,r=this.props.now,i=this.props.departmentLookup,c=this.props.semesterLookup,l=this.props.distributionLookup,u=this.props.pdfLookup,h=this.props.auditLookup,d=this.props.colorLookup,p=this.props.onSelectCourse,m=this.props.onUnselectCourse,f=this.props.onSaveCourse,v=this.props.onUnsaveCourse,S=this.props.onAddCourseToSchedule,b=this.props.onRemoveCourseFromSchedule,g=this.props.onMouseOverCourse,C=this.props.onMouseOutCourse,k=this.props.onChangeCourseColorInSchedule,y=this.props.showButtons,E=this.state.expanded,N=this.state.instructor,O=this.state.loaded,w=this.toggle;return s.a.createElement("li",{className:"InstructorResult"+(E?" InstructorResult-expanded":"")},s.a.createElement("div",{className:"InstructorResult-header",onClick:w},s.a.createElement("div",{className:"InstructorResult-top"},s.a.createElement("span",{className:"InstructorResult-name"},N.fullName),!1===O?s.a.createElement(Ae.a,{className:"InstructorResult-spinner"}):null,s.a.createElement(Ze,{score:N.history.rating,new:!1,description:N.history.ratedCourses?"Average rating over "+N.history.ratedCourses+" courses":null})),s.a.createElement("div",{className:"InstructorResult-middle"},s.a.createElement("span",{className:"InstructorResult-position"},N.position),s.a.createElement("span",{className:"InstructorResult-count",title:N.history.courses+" courses under this instructor"},N.history.courses)),s.a.createElement("ul",{className:"InstructorResult-bottom",onClick:function(e){e.stopPropagation()}},N.phone&&s.a.createElement("li",{className:"InstructorResult-detail"},N.phone),N.email&&s.a.createElement("li",{className:"InstructorResult-detail"},N.email),N.office&&s.a.createElement("li",{className:"InstructorResult-detail"},N.office))),O?s.a.createElement("ul",{className:"InstructorResult-courses"},N.courses.map(function(E){return s.a.createElement("div",{key:E._id,className:"InstructorResult-course"},s.a.createElement(ot,{selectedSemester:e,user:t,selectedSchedule:a,selectedCourse:n,colors:o,now:r,departmentLookup:i,semesterLookup:c,colorLookup:d,distributionLookup:l,pdfLookup:u,auditLookup:h,onSelectCourse:p,onUnselectCourse:m,onSaveCourse:f,onUnsaveCourse:v,onAddCourseToSchedule:S,onRemoveCourseFromSchedule:b,onMouseOverCourse:g,onMouseOutCourse:C,onChangeCourseColorInSchedule:k,key:E._id,course:E,showButtons:y,showInstructors:!1,showStrictRatings:!0,showSemester:!0}))})):null)}}]),t}(n.Component)),ut=a(132),ht=a.n(ut),dt=(a(244),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(v.a)(t).call(this,e))).state={expanded:!1,hovered:null,tab:0},a.toggle=a.toggle.bind(Object(b.a)(Object(b.a)(a))),a.handleChangeTab=a.handleChangeTab.bind(Object(b.a)(Object(b.a)(a))),a.handleHover=a.handleHover.bind(Object(b.a)(Object(b.a)(a))),a}return Object(S.a)(t,e),Object(m.a)(t,[{key:"toggle",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"handleChangeTab",value:function(e){this.setState({tab:e})}},{key:"handleHover",value:function(e){this.setState({hovered:e})}},{key:"render",value:function(){for(var e=this.state.expanded,t=this.state.hovered,a=this.state.tab,n=this.props.selectedSemester,o=this.props.departmentLookup,r=this.props.distributionLookup,i=this.props.pdfLookup,c=this.props.auditLookup,l=this.props.onChangeCourseSearch,u=this.toggle,h=this.handleChangeTab,d=this.handleHover,p=[{title:"Departments",values:Object.keys(o).sort()},{title:"Distributions",values:Object.keys(r).sort()},{title:"P/D/F options",values:Object.keys(i).sort()},{title:"Audit options",values:Object.keys(c).sort()}],m=[o,r,i,c],f=[],v=function(e){var t=p[e];f.push(s.a.createElement("li",{className:"FilterSelector-menu-item"+(e===a?" FilterSelector-menu-selected":""),onClick:function(){return h(e)},key:t.title},t.title))},S=0;S<p.length;S++)v(S);var b=[],g=p[a].values,C=function(e){var t=g[e];b.push(s.a.createElement("li",{className:"FilterSelector-filter",onClick:function(){return l(t,n._id)},onMouseOver:function(){return d(t)},onMouseOut:function(){return d(null)},title:m[a][t],key:t},t))};for(S=0;S<g.length;S++)C(S);return s.a.createElement("div",{className:"FilterSelector"},s.a.createElement("button",{className:"FilterSelector-toggle"+(e?" FilterSelector-expanded":""),onClick:u,title:"Toggle filters"},s.a.createElement(ht.a,null)),e?s.a.createElement("div",{className:"FilterSelector-popup"},s.a.createElement("div",{className:"FilterSelector-main"},s.a.createElement("ul",{className:"FilterSelector-menu"},f),s.a.createElement("ul",{className:"FilterSelector-filters"},b)),s.a.createElement("div",{className:"FilterSelector-description"},t?"".concat(t,": ").concat(m[a][t]):"Hint: you may combine filters!")):null)}}]),t}(n.Component)),pt=(a(245),function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.selectedSemester,t=this.props.user,a=this.props.selectedSchedule,n=this.props.courseSearch,o=this.props.waitingCourseSearch,r=this.props.loadingCourseSearch,i=this.props.searchedCourses,c=this.props.selectedCourse,l=this.props.instructorSearch,u=this.props.waitingInstructorSearch,h=this.props.loadingInstructorSearch,d=this.props.searchedInstructors,p=this.props.colors,m=this.props.now,f=this.props.departmentLookup,v=this.props.colorLookup,S=this.props.semesterLookup,b=this.props.distributionLookup,g=this.props.pdfLookup,C=this.props.auditLookup,k=this.props.onChangeCourseSearch,y=this.props.onSearchCourse,E=this.props.onSelectCourse,N=this.props.onUnselectCourse,O=this.props.onSaveCourse,w=this.props.onUnsaveCourse,j=this.props.onAddCourseToSchedule,L=this.props.onRemoveCourseFromSchedule,D=this.props.onChangeInstructorSearch,T=this.props.onSearchInstructor,I=this.props.onMouseOverCourse,R=this.props.onMouseOutCourse,M=this.props.onChangeCourseColorInSchedule,x=[s.a.createElement(me.a,null),s.a.createElement(ve.a,null),s.a.createElement(be.a,null),s.a.createElement(Ce.a,null)],_=[[[s.a.createElement(we.a,null),s.a.createElement(Le.a,null)],[s.a.createElement(ye.a,null),s.a.createElement(Ne.a,null)],[s.a.createElement(Re.a,null),s.a.createElement(Te.a,null)]],[[s.a.createElement(ye.a,null),s.a.createElement(Ne.a,null)],[s.a.createElement(Re.a,null),s.a.createElement(Te.a,null)]],[[s.a.createElement(we.a,null),s.a.createElement(Le.a,null)],[s.a.createElement(ye.a,null),s.a.createElement(Ne.a,null)],[s.a.createElement(Re.a,null),s.a.createElement(Te.a,null)]],[[s.a.createElement(we.a,null),s.a.createElement(Le.a,null)],[s.a.createElement(ye.a,null),s.a.createElement(Ne.a,null)],[s.a.createElement(Re.a,null),s.a.createElement(Te.a,null)]]],A=function(t){return function(a){"Enter"===a.key&&(0===t&&y(n,e),1===t&&T(l))}},F=function(e,t,a){var n=t.department+t.catalogNumber,s=a.department+a.catalogNumber;return e*((n>s)-(s>n))},P=function(e,t,a){return e*((t.fullName>a.fullName)-(a.fullName>t.fullName))},U=[i,null,t.savedCourses.filter(function(t){return t.semester===e}),a.courses],H=[i,d,"Saved","Selected"];return s.a.createElement(Je,{tabLabels:x,tabDescriptions:["Course search","Instructor search","Saved courses","Courses in schedule"],sortLabels:_,sortDescriptions:[["Sort by department code","Sort by title","Sort by rating"],["Sort by name","Sort by rating"],["Sort by department code","Sort by title","Sort by rating"],["Sort by department code","Sort by title","Sort by rating"]],renderInput:function(t){if(!(t>1)){var a=s.a.createElement("input",{key:t,className:"SideMenu-input",type:"text",value:t?l:n,onChange:function(e){return(t?D:k)(e.target.value)},onKeyDown:A(t),placeholder:"search",autoFocus:!0,onFocus:function(e){e.target.select()}}),i=null;0===t&&o||1===t&&u?i=s.a.createElement(xe.a,{className:"SideMenu-waiting"}):(0===t&&r||1===t&&h)&&(i=s.a.createElement(Ae.a,{className:"SideMenu-loading"}));var c=0===t?s.a.createElement(dt,{selectedSemester:e,departmentLookup:f,distributionLookup:b,pdfLookup:g,auditLookup:C,onChangeCourseSearch:k}):null;return s.a.createElement("div",{className:"SideMenu-header"},a,i,c)}},renderContent:function(n,o,r){return 1===n?d.slice().sort((o?function(e,t,a){var n=t.history.rating,s=a.history.rating;return n||s?n?s?e*(s-n)||P(1,t,a):-1:1:P(1,t,a)}:P).bind(null,r)).map(function(n){return s.a.createElement(lt,{selectedSemester:e,user:t,selectedSchedule:a,selectedCourse:c,colors:p,now:m,departmentLookup:f,semesterLookup:S,colorLookup:v,distributionLookup:b,pdfLookup:g,auditLookup:C,onSelectCourse:E,onUnselectCourse:N,onSaveCourse:O,onUnsaveCourse:w,onAddCourseToSchedule:j,onRemoveCourseFromSchedule:L,onMouseOverCourse:I,onMouseOutCourse:R,onChangeCourseColorInSchedule:M,key:n._id,instructor:n,showButtons:!0})}):U[n].slice().sort((2===o?function(e,t,a){return t.rating||a.rating?t.rating?a.rating?e*(a.rating.score-t.rating.score)||F(1,t,a):-1:1:t.new||a.new?t.new?a.new?F(1,t,a):-1:1:F(1,t,a)}:o?function(e,t,a){return e*((t.title>a.title)-(a.title>t.title))}:F).bind(null,r)).map(function(n){return s.a.createElement(ot,{selectedSemester:e,user:t,selectedSchedule:a,selectedCourse:c,colors:p,now:m,departmentLookup:f,semesterLookup:S,colorLookup:v,distributionLookup:b,pdfLookup:g,auditLookup:C,onSelectCourse:E,onUnselectCourse:N,onSaveCourse:O,onUnsaveCourse:w,onAddCourseToSchedule:j,onRemoveCourseFromSchedule:L,onMouseOverCourse:I,onMouseOutCourse:R,onChangeCourseColorInSchedule:M,key:n._id,course:n,showButtons:!0,showInstructors:!1,showStrictRatings:!1,showSemester:!1})})},captionNouns:["Course","Instructor","Saved Course","Selected Course"],edge:"left",keys:H})}}]),t}(n.Component)),mt=(a(246),a(247),a(248),["","M","T","W","Th","F"]),ft=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(m.a)(t,[{key:"minsToString",value:function(e){var t=e>=720?"pm":"am";return(Math.floor(e/60)-1)%12+1+":"+("00"+e%60).substr(-2)+" "+t}},{key:"render",value:function(){var e=this.props.hoveredCourse,t=this.props.hoveredSection,a=this.props.colorLookup,n=this.props.onAddSectionToSchedule,o=this.props.onRemoveSectionFromSchedule,r=this.props.onMouseOverSection,i=this.props.onMouseOutSection,c=this.props.minTime,l=this.props.maxTime,u=this.props.session,h=this.props.position,d=this.minsToString,p=u.meeting,m=u.section,f=u.course,v=u.selected,S=(p.startTime-c)/(l-c)*100+"%",b=(l-p.endTime)/(l-c)*100+"%",g=m._id===this.props.hoveredSection,C=t&&m._id.substring(0,11)===t.substring(0,11),k=e&&f._id===e._id,y=a&&a[f._id]||"#7F7F7F",E=f.department+f.catalogNumber+" "+m.name+"\n"+m.meetings.map(function(e){return e.days.map(function(e){return mt[e]}).join("")+" "+d(e.startTime)+" \u2013 "+d(e.endTime)+"\n"}).join("")+m.status+" "+(m.seatsTaken>=0?m.seatsTaken:"\u2013")+" / "+(m.seatsTotal>=0?m.seatsTotal:"\u2013")+"\n"+(p.building&&p.room?p.building+" "+p.room+"\n":""),N={top:S,bottom:b,left:h.left,right:h.right,borderColor:y,color:v||C||k?null:y,backgroundColor:v||C||k?y:null,opacity:k||v&&g||C&&!g?.5:null};return s.a.createElement("div",{className:"DisplayScheduleSession",title:E,style:N,onClick:(v?o:n).bind(null,m._id),onMouseOver:r.bind(null,m._id),onMouseOut:i.bind(null,m._id)},s.a.createElement("div",{className:"DisplayScheduleSession-top"},s.a.createElement("span",{className:"DisplayScheduleSession-listing"},f.department+f.catalogNumber),s.a.createElement("span",{className:"DisplayScheduleSession-section"},m.name),s.a.createElement("span",{className:"DisplayScheduleSession-seats"},(m.seatsTaken>=0?m.seatsTaken:"\u2013")+"\xa0/ "+(m.seatsTotal>=0?m.seatsTotal:"\u2013"))),s.a.createElement("div",{className:"DisplayScheduleSession-bottom"},s.a.createElement("span",{className:"DisplayScheduleSession-location"},p.building&&p.room?p.building+" "+p.room:"")," ",s.a.createElement("span",{className:"DisplayScheduleSession-status"},m.status)))}}]),t}(n.Component),vt=(a(249),["","Mon","Tue","Wed","Thu","Fri"]),St=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.hoveredCourse,t=this.props.hoveredSection,a=this.props.colorLookup,n=this.props.onAddSectionToSchedule,o=this.props.onRemoveSectionFromSchedule,r=this.props.onMouseOverSection,i=this.props.onMouseOutSection,c=this.props.day,l=this.props.sessions,u=this.props.minTime,h=this.props.maxTime,d=this.props.labels,p=[];if(!d){for(var m=l.slice().sort(function(e,t){return e.startTime-t.startTime||t.endTime-e.endTime||(e.course.department>t.course.department)-(e.course.department<t.course.department)||(e.course.catalogNumber>t.course.catalogNumber)-(e.course.catalogNumber<t.course.catalogNumber)||(e.section.name>t.section.name)-(e.section.name<t.section.name)}),f=[],v={position:{right:0}},S={position:{left:100}},b=0;b<m.length;b++)for(var g=m[b],C=0;C<f.length+1;C++){C===f.length&&f.push([]);var k=f[C],y=k[k.length-1];if(0===k.length||g.meeting.startTime>=y.session.meeting.endTime){var E={session:g,upLeft:void 0,upRight:void 0,downLeft:[],downRight:[]};if(C>0){var N=f[C-1],O=N[N.length-1];E.upLeft=O,O.downRight.push(E)}else E.upLeft=v;for(var w=C+1;w<f.length+1;w++){if(w===f.length){E.upRight=S;break}var j=f[w],L=j[j.length-1];if(g.meeting.startTime<L.session.meeting.endTime){E.upRight=L,L.downLeft.push(E);break}}k.push(E);break}}for(var D=f.length-1;D>=0;D--)for(var T=f[D],I=0;I<T.length;I++){var R=T[I];if(!R.position){for(var M=[],x=R;!x.position;x=x.upLeft){for(var _=!1,A=0;A<x.downLeft.length;A++)x.downLeft[A].position&&(_=!0);if(M.push(x),_)break}var F=M.length,P=M[F-1],U=0;P.upLeft.position&&(U=P.upLeft.position.right);for(var H=0;H<P.downLeft.length;H++){var J=P.downLeft[H];J.position&&(U=U>J.position.right?U:J.position.right)}for(var B=R.upRight.position.left,W=(B-U)/F,V=void 0,q=0;q<M.length;q++){var G=M[q],K=B-q*W;if(G.upRight&&G.upRight.position&&G.upRight.position.left<K){V=q;break}}if(V)for(var Q=(B-M[V].upRight.position.left)/V,z=0;z<V;z++){M[z].position={left:B-(z+1)*Q,right:B-z*Q}}else for(var Y=0;Y<F;Y++){M[Y].position={left:B-(Y+1)*W,right:B-Y*W}}}}for(var X=0;X<f.length;X++)for(var $=0;$<f[X].length;$++){var Z=f[X][$],ee={left:Z.position.left+"%",right:100-Z.position.right+"%"};p.push(s.a.createElement(ft,{hoveredCourse:e,hoveredSection:t,colorLookup:a,onAddSectionToSchedule:n,onRemoveSectionFromSchedule:o,onMouseOverSection:r,onMouseOutSection:i,minTime:u,maxTime:h,key:X+"."+$,session:Z.session,position:ee}))}}for(var te=[],ae=0;ae<24;ae++)if(!(60*ae<u||60*ae>h)){var ne={top:(Math.max(60*ae,u)-u)/(h-u)*100+"%",bottom:(h-Math.min(60*(ae+1),h))/(h-u)*100+"%"};te.push(s.a.createElement("div",{key:ae,className:"DisplayScheduleDay-cell"+(ae%3?"":" DisplayScheduleDay-cell-main"),style:ne},d?s.a.createElement("div",{className:"DisplayScheduleDay-cell-label"},s.a.createElement("div",{className:"DisplayScheduleDay-cell-text"},(ae-1)%12+1)):null))}return s.a.createElement("div",{className:"DisplayScheduleDay"+(d?" DisplayScheduleDay-labels":"")},s.a.createElement("div",{className:"DisplayScheduleDay-header"},vt[c||0]),s.a.createElement("div",{className:"DisplayScheduleDay-body"},te,p))}}]),t}(n.Component),bt=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.selectedSchedule,t=this.props.hoveredCourse,a=this.props.hoveredSection,n=this.props.colorLookup,o=this.props.onAddSectionToSchedule,r=this.props.onRemoveSectionFromSchedule,i=this.props.onMouseOverSection,c=this.props.onMouseOutSection,l=[[],[],[],[],[],[]],u=e.courses.slice();if(t){for(var h=!1,d=0;d<u.length;d++)h|=t._id===u[d]._id;h||u.push(t)}for(var p=e.sections,m=0;m<u.length;m++)for(var f=u[m],v=f.sections,S=0;S<v.length;S++){for(var b=v[S],g=!1,C=!1,k=0;k<p.length;k++)if(p[k].substr(0,11)===b._id.substr(0,11)){if(p[k]===b._id){C=!0;break}g=!0;break}if(!g)for(var y=b.meetings,E=0;E<y.length;E++){var N=y[E],O=N.days;if(O&&0!==O.length&&N.startTime&&N.endTime)for(var w=0;w<O.length;w++){l[O[w]].push({course:f,section:b,meeting:N,startTime:N.startTime,endTime:N.endTime,selected:C})}else O=[0]}}var j=[];j.push(s.a.createElement(St,{key:-1,minTime:480,maxTime:1440,labels:!0}));for(var L=1;L<6;L++)j.push(s.a.createElement(St,{hoveredCourse:t,hoveredSection:a,colorLookup:n,onAddSectionToSchedule:o,onRemoveSectionFromSchedule:r,onMouseOverSection:i,onMouseOutSection:c,key:L,day:L,sessions:l[L],minTime:480,maxTime:1440}));return j.push(s.a.createElement(St,{key:-2,minTime:480,maxTime:1440,labels:!0})),s.a.createElement("div",{className:"DisplaySchedule"},j)}}]),t}(n.Component),gt=a(133),Ct=a.n(gt),kt=a(134),yt=a.n(kt),Et=a(135),Nt=a.n(Et),Ot=(a(250),function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(m.a)(t,[{key:"renderBanner",value:function(e){if(e)return s.a.createElement("div",{className:"DisplayCourseDetails-field DisplayCourseDetails-banner"},e)}},{key:"renderReservedSeats",value:function(e){if(e&&e.length)return s.a.createElement("div",{className:"DisplayCourseDetails-field"},s.a.createElement("div",{className:"DisplayCourseDetails-field-title"},"Reserved Seats"),s.a.createElement("ul",{className:"DisplayCourseDetails-field-content"},e.map(function(e){return s.a.createElement("li",{key:e,className:"DisplayCourseDetails-reserved-seat"},e)})))}},{key:"renderGrading",value:function(e){if(e&&e.length)return e=e.slice().sort(function(e,t){return t.percent-e.percent}),s.a.createElement("div",{className:"DisplayCourseDetails-field"},s.a.createElement("div",{className:"DisplayCourseDetails-field-title"},"Grading"),s.a.createElement("table",{className:"DisplayCourseDetails-field-content"},s.a.createElement("tbody",null,e.map(function(e){return s.a.createElement("tr",{key:e.component,className:"DisplayCourseDetails-grading"},s.a.createElement("td",{className:"DisplayCourseDetails-grading-percent"},"".concat(e.percent,"%")),s.a.createElement("td",{className:"DisplayCourseDetails-grading-component"},e.component))}))))}},{key:"renderReadings",value:function(e){if(e&&e.length)return s.a.createElement("div",{className:"DisplayCourseDetails-field"},s.a.createElement("div",{className:"DisplayCourseDetails-field-title"},"Readings"),s.a.createElement("ul",{className:"DisplayCourseDetails-field-content"},e.map(function(e){return s.a.createElement("li",{key:e.title,className:"DisplayCourseDetails-reading"},s.a.createElement("div",{className:"DisplayCourseDetails-reading-title"},e.title),s.a.createElement("div",{className:"DisplayCourseDetails-reading-author"},e.author))})))}},{key:"renderText",value:function(e,t){if(t)return s.a.createElement("div",{className:"DisplayCourseDetails-field"},s.a.createElement("div",{className:"DisplayCourseDetails-field-title"},e),s.a.createElement("p",{className:"DisplayCourseDetails-field-content"},t))}},{key:"renderNumericEvaluations",value:function(e,t){return e.semester&&e.numeric&&e.written&&Object.keys(e.numeric).length?s.a.createElement("div",{key:"numeric",className:"DisplayCourseDetails-field"},s.a.createElement("div",{className:"DisplayCourseDetails-field-title"},"Numeric Evaluations from "+t[e.semester].name),s.a.createElement("ul",{className:"DisplayCourseDetails-field-content"},e.numeric.slice().sort(function(e,t){return t.score-e.score}).map(function(e){return s.a.createElement("li",{key:e.field,className:"DisplayCourseDetails-evaluations-numeric"},s.a.createElement(Ze,{score:e.score}),s.a.createElement("span",{className:"DisplayCourseDetails-evaluations-field"},e.field))}))):null}},{key:"renderWrittenEvaluations",value:function(e,t){return s.a.createElement("div",{key:"written",className:"DisplayCourseDetails-field"},s.a.createElement("div",{className:"DisplayCourseDetails-field-title"},e.semester&&e.numeric&&e.written&&Object.keys(e.numeric).length?e.written.length+" Comments from "+t[e.semester].name:"No Course Evaluations Available"),e.semester&&e.numeric&&e.written&&Object.keys(e.numeric).length?s.a.createElement("ul",{className:"DisplayCourseDetails-field-content"},e.written.map(function(e){return s.a.createElement("li",{key:e,className:"DisplayCourseDetails-evaluations-written"},e)})):null)}},{key:"render",value:function(){var e=this.props.selectedCourse,t=this.props.semesterLookup;return s.a.createElement("div",{className:"DisplayCourseDetails"},this.renderBanner(e.banner),this.renderText("Description",e.description),this.renderNumericEvaluations(e.evaluations,t),this.renderGrading(e.grading),this.renderText("Assignments",e.assignments),this.renderText("Prerequisites",e.prerequisites),this.renderText("Equivalent Courses",e.equivalentCourses),this.renderText("Other Information",e.otherInformation),this.renderText("Other Requirements",e.otherRequirements),this.renderReservedSeats(e.reservedSeats),this.renderReadings(e.readings),this.renderWrittenEvaluations(e.evaluations,t))}}]),t}(n.Component)),wt=a(136),jt=a.n(wt),Lt=(a(251),function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.user,t=this.props.selectedCourse,a=this.props.now,n=this.props.departmentLookup,o=this.props.semesterLookup,r=this.props.distributionLookup,i=this.props.pdfLookup,c=this.props.auditLookup,l=this.props.onSelectCourse,u=[s.a.createElement(jt.a,null),s.a.createElement(ve.a,null)],h=[[[s.a.createElement(Le.a,null),s.a.createElement(we.a,null)],[s.a.createElement(Re.a,null),s.a.createElement(Te.a,null)]],[[s.a.createElement(ye.a,null),s.a.createElement(Ne.a,null)],[s.a.createElement(Re.a,null),s.a.createElement(Te.a,null)]]],d=function(e,t,a){return e*((a.semester>t.semester)-(t.semester>a.semester))},p=function(e){for(var t=0,a=0,n=0;n<e.courses.length;n++){var s=e.courses[n];s.rating&&s.rating.semester===s.semester&&(a++,t+=s.rating.score)}return{score:a?t/a:null,new:0===e.courses.length}},m=function(e,t,a){return e*((t.fullName>a.fullName)-(a.fullName>t.fullName))};return s.a.createElement(Je,{tabLabels:u,tabDescriptions:["All semesters","Instructors"],sortLabels:h,sortDescriptions:[["Sort by semester","Sort by rating"],["Sort by name","Sort by rating"]],renderInput:function(e){},renderIcon:function(e){},renderContent:function(u,h,f){return u?t.instructors.slice().sort((h?function(e,t,a){var n=p(t),s=p(a);return n.score||s.score?n.score?s.score?e*(s.score-n.score)||m(1,t,a):-1:1:n.new||s.new?n.new?s.new?m(1,t,a):-1:1:m(1,t,a)}:m).bind(null,f)).map(function(u){return s.a.createElement(lt,{user:e,now:a,departmentLookup:n,selectedCourse:t,semesterLookup:o,distributionLookup:r,pdfLookup:i,auditLookup:c,onSelectCourse:l,key:u._id,instructor:u,showButtons:!1})}):t.courses.slice().sort((h?function(e,t,a){return t.rating||a.rating?t.rating?a.rating?e*(a.rating.score-t.rating.score)||d(1,t,a):-1:1:t.new||a.new?t.new?a.new?d(1,t,a):-1:1:d(1,t,a)}:d).bind(null,f)).map(function(u){return s.a.createElement(ot,{user:e,selectedCourse:t,now:a,departmentLookup:n,semesterLookup:o,distributionLookup:r,pdfLookup:i,auditLookup:c,onSelectCourse:l,key:u._id,course:u,showButtons:!1,showInstructors:!0,showStrictRatings:!0,showSemester:!1})})},renderFilter:function(e){},captionNouns:["Semester","Instructor"],edge:"right",keys:["semester","instructor"]})}}]),t}(n.Component)),Dt=(a(252),function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){for(var e=this.props.user,t=this.props.selectedCourse,a=this.props.now,n=this.props.departmentLookup,o=this.props.semesterLookup,r=this.props.distributionLookup,i=this.props.pdfLookup,c=this.props.auditLookup,l=this.props.onSelectCourse,u=this.props.onUnselectCourse,h=this.props.onSaveCourse,p=this.props.onUnsaveCourse,m=!1,f=0;f<e.savedCourses.length;f++)m|=e.savedCourses[f]._id===t._id;return s.a.createElement("div",{className:"DisplayCourse"},s.a.createElement("div",{className:"DisplayCourse-body"},s.a.createElement("div",{className:"DisplayCourse-summary"},s.a.createElement(nt,{user:e,now:a,departmentLookup:n,semesterLookup:o,distributionLookup:r,pdfLookup:i,auditLookup:c,course:t,showInstructors:!1,showStrictRatings:!1,showSemester:!0})),s.a.createElement("div",{className:"DisplayCourse-buttons"},s.a.createElement("button",{className:"DisplayCourse-button "+(m?"DisplayCourse-unsave":"DisplayCourse-save"),title:m?"Unsave course":"Save course",onClick:(m?p:h).bind(null,t._id)},s.a.createElement(be.a,null)),s.a.createElement(d.a.OutboundLink,{className:"DisplayCourse-button",title:"Registrar course information page",eventLabel:"Clicked registrar course information page",to:"https://registrar.princeton.edu/course-offerings/course_details.xml?courseid=".concat(t.systemId,"&term=").concat(t.semester),rel:"noopener noreferrer",target:"_blank"},s.a.createElement(Ct.a,null)),s.a.createElement(d.a.OutboundLink,{className:"DisplayCourse-button",title:"Registrar course evaluation page",eventLabel:"Clicked registrar course evaluation page",to:"https://reg-captiva.princeton.edu/chart/index.php?terminfo=".concat(t.semester,"&courseinfo=").concat(t.systemId),rel:"noopener noreferrer",target:"_blank"},s.a.createElement(yt.a,null)),t.website?s.a.createElement(d.a.OutboundLink,{className:"DisplayCourse-button",title:"Course website",eventLabel:"Clicked course website",to:t.website,rel:"noopener noreferrer",target:"_blank"},s.a.createElement(Nt.a,null)):null,s.a.createElement("div",{className:"DisplayCourse-stretch"}),s.a.createElement("button",{className:"DisplayCourse-button DisplayCourse-close",title:"Hide course information",onClick:u.bind(null,t._id)},s.a.createElement(qe.a,null))),s.a.createElement("div",{className:"DisplayCourse-content"},s.a.createElement(Ot,{selectedCourse:t,semesterLookup:o}))),s.a.createElement(Lt,{user:e,now:a,departmentLookup:n,selectedCourse:t,semesterLookup:o,distributionLookup:r,pdfLookup:i,auditLookup:c,onSelectCourse:l}))}}]),t}(n.Component)),Tt=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.user,t=this.props.selectedSchedule,a=this.props.selectedCourse,n=this.props.hoveredCourse,o=this.props.hoveredSection,r=this.props.now,i=this.props.departmentLookup,c=this.props.colorLookup,l=this.props.semesterLookup,u=this.props.distributionLookup,h=this.props.pdfLookup,d=this.props.auditLookup,p=this.props.onSelectCourse,m=this.props.onUnselectCourse,f=this.props.onSaveCourse,v=this.props.onUnsaveCourse,S=this.props.onAddSectionToSchedule,b=this.props.onRemoveSectionFromSchedule,g=this.props.onMouseOverSection,C=this.props.onMouseOutSection;return s.a.createElement("div",{className:"DisplayPane"},a?s.a.createElement(Dt,{user:e,selectedCourse:a,now:r,departmentLookup:i,semesterLookup:l,distributionLookup:u,pdfLookup:h,auditLookup:d,onSelectCourse:p,onUnselectCourse:m,onSaveCourse:f,onUnsaveCourse:v}):s.a.createElement(bt,{selectedSchedule:t,hoveredCourse:n,hoveredSection:o,colorLookup:c,onAddSectionToSchedule:S,onRemoveSectionFromSchedule:b,onMouseOverSection:g,onMouseOutSection:C}))}}]),t}(n.Component),It=(a(253),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(v.a)(t).call(this,e))).state={closed:!1},a}return Object(S.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return this.state.closed?null:s.a.createElement("div",{className:"Bubble"},s.a.createElement("div",{className:"Bubble-top"},s.a.createElement("div",{className:"Bubble-title"},"Note"),s.a.createElement(qe.a,{className:"Bubble-button",onClick:function(){e.setState({closed:!0})}})),s.a.createElement("div",{className:"Bubble-content"},"Please note that for the foreseeable future, precourser will not be updated, but will still be available at"," ",s.a.createElement("a",{className:"Bubble-link",href:"https:/precourser.herokuapp.com",rel:"noopener noreferrer",target:"_blank"},"precourser.herokuapp.com"),". The codebase is publicly available"," ",s.a.createElement("a",{className:"Bubble-link",href:"https://github.com/melyshu/precourser",rel:"noopener noreferrer",target:"_blank"},"here"),"."))}}]),t}(n.Component)),Rt=(a(254),function(e){function t(e){var a;Object(p.a)(this,t),(a=Object(f.a)(this,Object(v.a)(t).call(this,e))).state={departments:[],semesters:[],selectedSemester:null,user:{savedCourses:[]},schedules:[],selectedSchedule:{courses:[]},courseSearch:"",waitingCourseSearch:!1,loadingCourseSearch:!1,searchedCourses:[],selectedCourse:null,instructorSearch:"",waitingInstructorSearch:!1,loadingInstructorSearch:!1,searchedInstructors:[],hoveredCourse:null,hoveredSection:null,colors:[],loading:!0,now:new Date},a.history=e.history,a.fetchJson=ct.fetchJson,a.fetchJsonAndSetState=ct.fetchJsonAndSetState;for(var n=["fetchJsonAndSetState","handleChangeSemester","handleChangeSchedule","handleCreateSchedule","handleRenameSchedule","handleDeleteSchedule","handleChangeCourseSearch","handleSearchCourse","handleSelectCourse","handleUnselectCourse","handleSaveCourse","handleUnsaveCourse","handleAddCourseToSchedule","handleRemoveCourseFromSchedule","handleAddSectionToSchedule","handleRemoveSectionFromSchedule","handleChangeInstructorSearch","handleSearchInstructor","handleMouseOverCourse","handleMouseOutCourse","handleMouseOverSection","handleMouseOutSection","handleChangeCourseColorInSchedule"],s=0;s<n.length;s++)a[n[s]]=a[n[s]].bind(Object(b.a)(Object(b.a)(a)));return a}return Object(S.a)(t,e),Object(m.a)(t,[{key:"handleChangeSemester",value:function(e){d.a.event({category:"Navigation",action:"Changed Semester",label:e});var t=this.state.courseSearch;t.length<1?this.fetchJsonAndSetState("/api/semester/".concat(e)):this.fetchJsonAndSetState("/api/semester/".concat(e,"?courseSearch=").concat(encodeURIComponent(t)))}},{key:"handleChangeSchedule",value:function(e){d.a.event({category:"Navigation",action:"Changed Schedule"}),this.fetchJsonAndSetState("/api/schedule/".concat(e))}},{key:"handleCreateSchedule",value:function(e){d.a.event({category:"Schedule",action:"Created Schedule"}),this.fetchJsonAndSetState("/api/schedule/semester/".concat(this.state.selectedSemester,"/name/").concat(encodeURIComponent(e)),{method:"POST"})}},{key:"handleRenameSchedule",value:function(e){d.a.event({category:"Schedule",action:"Renamed Schedule"}),this.fetchJsonAndSetState("/api/schedule/".concat(this.state.selectedSchedule._id,"/name/").concat(encodeURIComponent(e)),{method:"PUT"})}},{key:"handleDeleteSchedule",value:function(){d.a.event({category:"Schedule",action:"Deleted Schedule"}),this.fetchJsonAndSetState("/api/schedule/".concat(this.state.selectedSchedule._id),{method:"DELETE"})}},{key:"handleChangeCourseSearch",value:function(e){var t=this,a=this.state.selectedSemester;clearTimeout(this.searchTimeout),e.length<1?this.setState({courseSearch:e,searchedCourses:[],waitingCourseSearch:!1,loadingCourseSearch:!1}):(this.setState({courseSearch:e,waitingCourseSearch:!0,loadingCourseSearch:!1}),this.searchTimeout=setTimeout(function(){t.handleSearchCourse(e,a)},1e3))}},{key:"handleSearchCourse",value:function(e,t){var a=this;(this.state.courseSearch!==e||this.state.selectedSemester!==t||this.state.waitingCourseSearch)&&(d.a.pageview("/search?sc=course&q=".concat(encodeURIComponent(e))),d.a.event({category:"Search",action:"Searched Course"}),this.setState({waitingCourseSearch:!1,loadingCourseSearch:!0}),this.fetchJson("/api/course/semester/".concat(t,"/search/").concat(encodeURIComponent(e))).then(function(n){a.state.courseSearch===e&&a.state.selectedSemester===t&&a.state.loadingCourseSearch&&(clearTimeout(a.searchTimeout),a.setState(n))}))}},{key:"handleSelectCourse",value:function(e){d.a.pageview("/course/".concat(e)),d.a.event({category:"Course",action:"Opened Course",label:e}),this.history.push("/course/".concat(e))}},{key:"handleUnselectCourse",value:function(){d.a.pageview("/"),d.a.event({category:"Course",action:"Closed Course"}),this.setState({selectedCourse:null}),this.history.push("/")}},{key:"handleSaveCourse",value:function(e){d.a.event({category:"Course",action:"Saved Course",label:e}),this.fetchJsonAndSetState("/api/save/course/".concat(e),{method:"PUT"})}},{key:"handleUnsaveCourse",value:function(e){d.a.event({category:"Course",action:"Unsaved Course",label:e}),this.fetchJsonAndSetState("/api/save/course/".concat(e),{method:"DELETE"})}},{key:"handleAddCourseToSchedule",value:function(e){d.a.event({category:"Schedule",action:"Added Course",label:e}),this.fetchJsonAndSetState("/api/schedule/".concat(this.state.selectedSchedule._id,"/course/").concat(e),{method:"PUT"})}},{key:"handleRemoveCourseFromSchedule",value:function(e){d.a.event({category:"Schedule",action:"Removed Course",label:e}),this.fetchJsonAndSetState("/api/schedule/".concat(this.state.selectedSchedule._id,"/course/").concat(e),{method:"DELETE"}),this.handleMouseOutCourse(e)}},{key:"handleAddSectionToSchedule",value:function(e){d.a.event({category:"Schedule",action:"Added Section",label:e}),this.fetchJsonAndSetState("/api/schedule/".concat(this.state.selectedSchedule._id,"/section/").concat(e),{method:"PUT"})}},{key:"handleRemoveSectionFromSchedule",value:function(e){d.a.event({category:"Schedule",action:"Removed Section",label:e}),this.fetchJsonAndSetState("/api/schedule/".concat(this.state.selectedSchedule._id,"/section/").concat(e),{method:"DELETE"})}},{key:"handleChangeInstructorSearch",value:function(e){var t=this;clearTimeout(this.searchTimeout),e.length<1?this.setState({instructorSearch:e,searchedInstructors:[],waitingInstructorSearch:!1,loadingInstructorSearch:!1}):(this.setState({instructorSearch:e,waitingInstructorSearch:!0,loadingInstructorSearch:!1}),this.searchTimeout=setTimeout(function(){t.handleSearchInstructor(e)},1e3))}},{key:"handleSearchInstructor",value:function(e){var t=this;(this.state.instructorSearch!==e||this.state.waitingInstructorSearch)&&(d.a.pageview("/search?sc=instructor&q=".concat(encodeURIComponent(e))),d.a.event({category:"Search",action:"Searched Instructor"}),this.setState({waitingInstructorSearch:!1,loadingInstructorSearch:!0}),this.fetchJson("/api/instructor/search/".concat(encodeURIComponent(e))).then(function(a){t.state.instructorSearch===e&&t.state.loadingInstructorSearch&&(clearTimeout(t.searchTimeout),t.setState(a))}))}},{key:"handleMouseOverCourse",value:function(e){var t=this;clearTimeout(this.hoveredCourseTimeout),this.hoveredCourseTimeout=setTimeout(function(){return t.setState({hoveredCourse:e,hoveredSection:null})},200)}},{key:"handleMouseOutCourse",value:function(e){var t=this;clearTimeout(this.hoveredCourseTimeout),this.hoveredCourseTimeout=setTimeout(function(){return t.setState({hoveredCourse:null})},200)}},{key:"handleMouseOverSection",value:function(e){this.setState({hoveredCourse:null,hoveredSection:e})}},{key:"handleMouseOutSection",value:function(e){this.setState({hoveredSection:null})}},{key:"handleChangeCourseColorInSchedule",value:function(e,t){this.fetchJsonAndSetState("/api/schedule/".concat(this.state.selectedSchedule._id,"/course/").concat(e,"/color/").concat(t),{method:"PUT"})}},{key:"componentDidMount",value:function(){var e=this;this.fetchJson("/api/startup").then(function(t){e.setState(t),d.a.set({userId:t.user._id}),d.a.pageview(e.history.location.pathname)}),this.nowInterval=setInterval(function(){return e.setState({now:new Date})},6e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.nowInterval)}},{key:"render",value:function(){var e=this;if(this.state.loading)return s.a.createElement("div",{className:"App"},s.a.createElement(de,{isEmpty:!0}));for(var t=this.state.departments,a=this.state.semesters,n=this.state.selectedSemester,o=this.state.user,r=this.state.schedules,i=this.state.selectedSchedule,c=this.state.courseSearch,l=this.state.waitingCourseSearch,u=this.state.loadingCourseSearch,h=this.state.searchedCourses,d=this.state.selectedCourse,p=this.state.instructorSearch,m=this.state.waitingInstructorSearch,f=this.state.loadingInstructorSearch,v=this.state.searchedInstructors,S=this.state.hoveredCourse,b=this.state.hoveredSection,g=this.state.colors,C=this.state.now,k=this.handleChangeSemester,y=this.handleChangeSchedule,E=this.handleCreateSchedule,N=this.handleRenameSchedule,O=this.handleDeleteSchedule,w=this.handleChangeCourseSearch,j=this.handleSearchCourse,L=this.handleSelectCourse,D=this.handleUnselectCourse,T=this.handleSaveCourse,I=this.handleUnsaveCourse,R=this.handleAddCourseToSchedule,M=this.handleRemoveCourseFromSchedule,x=this.handleAddSectionToSchedule,_=this.handleRemoveSectionFromSchedule,A=this.handleChangeInstructorSearch,F=this.handleSearchInstructor,P=this.handleMouseOverCourse,U=this.handleMouseOutCourse,H=this.handleMouseOverSection,J=this.handleMouseOutSection,B=this.handleChangeCourseColorInSchedule,W={},V=0;V<t.length;V++){var q=t[V];W[q._id]=q.name}for(var G={},K=0;K<a.length;K++){var Q=a[K];G[Q._id]=Q}for(var z={},Y=0;Y<g.length;Y++)z[g[Y]._id]=g[Y].name;for(var X={},$=0;$<i.colors.length;$++)X[i.colors[$].course]="#"+i.colors[$].color;var Z={EC:"Epistemology and Cognition",EM:"Ethical Thought and Moral Values",HA:"Historical Analysis",LA:"Literature and the Arts",SA:"Social Analysis",QR:"Quantitative Reasoning",STL:"Science and Technology with Laboratory",STN:"Science and Technology without Laboratory",W:"Writing"},ee={PDF:"PDF available",NPDF:"No PDF",PDFO:"PDF only",XPDF:"No PDF data"},te={A:"Audit available",NA:"No audit",XA:"No audit data"},ae=this.props.match.params.courseId;return!ae||d&&d._id===ae||this.fetchJsonAndSetState("/api/course/".concat(ae)).catch(function(t){console.error(t),e.history.replace("/")}),document.title=d?"precourser | ".concat(d.department).concat(d.catalogNumber," ").concat(d.title):"precourser | ".concat(i.name),s.a.createElement("div",{className:"App"},s.a.createElement(de,{semesters:a,selectedSemester:n,user:o,schedules:r,selectedSchedule:i,semesterLookup:G,onChangeSemester:k,onChangeSchedule:y,onCreateSchedule:E,onRenameSchedule:N,onDeleteSchedule:O}),s.a.createElement("div",{className:"App-page"},s.a.createElement(pt,{selectedSemester:n,user:o,selectedSchedule:i,courseSearch:c,waitingCourseSearch:l,loadingCourseSearch:u,searchedCourses:h,selectedCourse:d,instructorSearch:p,waitingInstructorSearch:m,loadingInstructorSearch:f,searchedInstructors:v,colors:g,now:C,departmentLookup:W,colorLookup:X,semesterLookup:G,distributionLookup:Z,pdfLookup:ee,auditLookup:te,onChangeCourseSearch:w,onSearchCourse:j,onSelectCourse:L,onUnselectCourse:D,onSaveCourse:T,onUnsaveCourse:I,onAddCourseToSchedule:R,onRemoveCourseFromSchedule:M,onChangeInstructorSearch:A,onSearchInstructor:F,onMouseOverCourse:P,onMouseOutCourse:U,onChangeCourseColorInSchedule:B}),s.a.createElement(Tt,{user:o,selectedSchedule:i,selectedCourse:d,hoveredCourse:S,hoveredSection:b,now:C,departmentLookup:W,colorLookup:X,semesterLookup:G,distributionLookup:Z,pdfLookup:ee,auditLookup:te,onSelectCourse:L,onUnselectCourse:D,onSaveCourse:T,onUnsaveCourse:I,onAddSectionToSchedule:x,onRemoveSectionFromSchedule:_,onMouseOverSection:H,onMouseOutSection:J})),s.a.createElement(It,null))}}]),t}(n.Component)),Mt=(a(255),function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){d.a.pageview("/home")}},{key:"render",value:function(){return s.a.createElement("div",{className:"Home"},s.a.createElement(de,{isEmpty:!0}),s.a.createElement("div",{className:"Home-page"},s.a.createElement("div",{className:"Home-box"},s.a.createElement("div",{className:"Home-top"},s.a.createElement("img",{src:he.a,alt:"logo",className:"Home-logo"}),s.a.createElement("span",{className:"Home-title"},"precourser")),s.a.createElement("div",{className:"Home-middle"},s.a.createElement("div",{className:"Home-subtitle"},"redefining course selection at Princeton")),s.a.createElement("div",{className:"Home-bottom"},s.a.createElement("a",{href:"/auth/login",className:"Home-button"},"select courses")),s.a.createElement("div",{className:"Home-narrow"},"Your screen may be too narrow. For the best experience, use a larger device."),s.a.createElement("div",{className:"Home-message"},"By using precourser, you agree to your data being stored and analyzed to improve this service.")),s.a.createElement("div",{className:"Home-footer-right"}),s.a.createElement("div",{className:"Home-footer-left"},s.a.createElement("div",null,"logo by"," ",s.a.createElement("a",{className:"Home-link",href:"mailto:linht@princeton.edu"},"linht")),s.a.createElement("div",null,"code by"," ",s.a.createElement("a",{className:"Home-link",href:"mailto:mshu@princeton.edu"},"mshu")),s.a.createElement("div",null,s.a.createElement("a",{className:"Home-link",href:"https://github.com/melyshu/precourser"},"github repo")))),s.a.createElement("div",null,s.a.createElement(It,null)))}}]),t}(n.Component));a(256),a(257);d.a.initialize("UA-115536526-1"),r.a.render(s.a.createElement(l.a,null,s.a.createElement(u.a,null,s.a.createElement(h.a,{exact:!0,path:"/home",component:Mt}),s.a.createElement(h.a,{path:"/course/:courseId",component:Rt}),s.a.createElement(h.a,{exact:!0,path:"/",component:Rt}))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/client",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/client","/service-worker.js");i?function(e){fetch(e,{credentials:"same-origin"}).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):c(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):c(e)})}}()},48:function(e,t,a){e.exports=a.p+"static/media/precourser.7b4575d9.svg"}},[[138,1,2]]]);
//# sourceMappingURL=main.5984d898.chunk.js.map